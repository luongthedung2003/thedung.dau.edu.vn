<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <title>THEDUNG - ƒêƒÉng nh·∫≠p</title>
  <link rel="icon" href="images/logo.png" />

  <style>
    :root {
      --gold-color: #5120bb;
      --gold-light: #08179c;
      --gold-dark: #1c1d7a;
      --spotify-green: #1db954;
      --spotify-green-hover: #1ed760;
      --dark-bg: #121212;
      --dark-surface: #1a1a1a;
      --dark-elevated: #282828;
      --text-primary: #ffffff;
      --text-secondary: #b3b3b3;
      --red: #ff1744;
      --cyan: #00e5ff;
      --yellow: #ffcc33;
    }

    * { font-family: "Space Mono", monospace; color: white; box-sizing: border-box; }
    a { text-decoration: none; }
    body { background-color: black; margin: 0; padding: 0; }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAV (gi·ªØ nguy√™n 100%) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .navbar { background:rgba(0,0,0,0.95); backdrop-filter:blur(10px); box-shadow:0 2px 10px rgba(175,134,80,0.2); padding:0.75rem 0; position:sticky; top:0; z-index:1000; border-bottom:1px solid rgba(175,134,80,0.2); }
    .logo-box { width:40px; height:40px; background:linear-gradient(135deg,var(--gold-light),var(--gold-color)); border-radius:12px; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 6px rgba(175,134,80,0.3); }
    .logo-box i { color:white; font-size:20px; }
    .brand-text { font-size:1.25rem; font-weight:600; color:white; margin-left:0.75rem; letter-spacing:1px; }
    .day-navigator { background:rgba(255,255,255,0.05); border-radius:12px; padding:0.5rem; display:flex; align-items:center; gap:1rem; border:1px solid rgba(175,134,80,0.2); }
    .day-btn { padding:0.5rem 1rem; border:none; background:transparent; border-radius:8px; font-size:0.875rem; font-weight:500; color:#d1d5db; transition:all 0.2s; white-space:nowrap; cursor:pointer; position:relative; }
    .day-btn:hover { background:rgba(255,255,255,0.1); color:white; }
    .day-btn::after { content:""; position:absolute; left:15%; bottom:2px; width:70%; height:2px; border-radius:2px; background:linear-gradient(90deg,#00e5ff,#ff1744); opacity:0; transform:scaleX(0); transition:all 0.3s ease; }
    .day-btn:hover::after { opacity:1; transform:scaleX(1); box-shadow:0 0 6px #00e5ff,0 0 12px #ff1744; }
    .day-btn.active { color:white; }
    .day-btn.active::after { opacity:1; transform:scaleX(1); background:linear-gradient(90deg,#00e5ff,#ff1744,#00e5ff); background-size:200% 100%; animation:glowMove 2s linear infinite; box-shadow:0 0 8px #00e5ff,0 0 18px #ff1744; }
    @keyframes glowMove { 0%{background-position:0% 50%}100%{background-position:200% 50%} }
    .nav-arrow { width:32px; height:32px; border:none; background:transparent; border-radius:8px; color:#9ca3af; display:flex; align-items:center; justify-content:center; transition:all 0.2s; cursor:pointer; }
    .nav-arrow:hover { background:rgba(255,255,255,0.1); color:var(--gold-color); }
    .icon-btn { width:40px; height:40px; border:none; background:transparent; border-radius:8px; color:#d1d5db; display:flex; align-items:center; justify-content:center; position:relative; transition:all 0.2s; cursor:pointer; }
    .icon-btn:hover { background:rgba(175,134,80,0.2); color:var(--gold-color); }
    .notification-dot { position:absolute; top:8px; right:8px; width:8px; height:8px; background:#ef4444; border-radius:50%; border:2px solid rgba(0,0,0,0.95); }
    .mobile-day-nav { background:rgba(0,0,0,0.9); padding:0.5rem; overflow-x:auto; white-space:nowrap; -webkit-overflow-scrolling:touch; border-bottom:1px solid rgba(175,134,80,0.2); }
    .mobile-day-nav::-webkit-scrollbar { display:none; }
    .mobile-day-btn { padding:0.5rem 0.75rem; font-size:0.75rem; display:inline-block; }
    .offcanvas-end { width:100%!important; max-width:320px!important; background:rgba(0,0,0,0.98); border-left:1px solid rgba(175,134,80,0.2); }
    .offcanvas-header { background:rgba(0,0,0,0.95); border-bottom:1px solid rgba(175,134,80,0.2); padding:1rem 1.25rem; }
    .offcanvas-title { font-weight:600; font-size:1rem; margin:0; color:white; }
    .offcanvas-header .btn-close { opacity:0.5; font-size:0.875rem; filter:invert(1); }
    .offcanvas-body { background-image:linear-gradient(rgba(0,0,0,0.95),rgba(0,0,0,0.2),rgba(0,0,0,0.2),rgba(0,0,0,0.95)),url("images/2k_stars_milky_way.jpg"); padding:1rem; }
    .menu-section { margin-bottom:1.5rem; }
    .section-title { font-size:0.75rem; font-weight:600; color:#9ca3af; text-transform:uppercase; letter-spacing:0.05em; margin-bottom:0.5rem; padding:0 0.5rem; }
    .menu-item { display:flex; align-items:center; gap:0.75rem; padding:0.625rem 0.75rem; border-radius:8px; text-decoration:none; color:#d1d5db; font-size:0.875rem; font-weight:500; transition:0.2s; margin-bottom:0.25rem; }
    .menu-item:hover { background:rgba(175,134,80,0.2); color:white; }
    .menu-item.active { background:rgba(175,134,80,0.3); color:var(--gold-color); }
    .menu-item i { width:20px; font-size:1rem; color:#9ca3af; }
    .menu-item.active i { color:var(--gold-color); }
    .menu-divider { margin:1rem 0; border:none; height:1px; background:rgba(175,134,80,0.2); }
    .user-dropdown { margin-left:10px; }
    .user-btn { display:flex; align-items:center; gap:8px; padding:6px 12px; border-radius:8px; transition:0.3s ease; }
    .user-btn:hover { background:rgba(81,32,187,0.2); }
    .username-text { font-size:14px; font-weight:600; letter-spacing:1px; color:#00e5ff; }
    .user-menu { border-radius:12px; border:1px solid rgba(0,229,255,0.3); box-shadow:0 10px 30px rgba(0,229,255,0.2); }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    main {
      background-image: linear-gradient(rgba(0,0,0,0.95),rgba(0,0,0,0.2),rgba(0,0,0,0.2),rgba(0,0,0,0.95)), url("images/2k_stars_milky_way.jpg");
      min-height: 100vh; background-size:cover; background-position:center;
      padding: 50px 20px;
      display: flex; align-items: center; justify-content: center;
    }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN SYSTEM ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .auth-container { width:100%; max-width:470px; padding:0; margin:0 auto; }

    .screen { display:none; }
    .screen.active { display:block; animation:screenIn 0.45s cubic-bezier(0.34,1.3,0.64,1); }
    @keyframes screenIn { from{opacity:0;transform:translateY(28px) scale(0.97)} to{opacity:1;transform:translateY(0) scale(1)} }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê AUTH CARD (gi·ªØ nguy√™n style g·ªëc) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .auth-card {
      background:rgba(26,26,26,0.98); border-radius:24px; padding:48px 40px;
      box-shadow:0 8px 32px rgba(0,0,0,0.5); border:1px solid rgba(255,255,255,0.1);
      backdrop-filter:blur(10px); position:relative; overflow:hidden;
    }
    @keyframes gradientMove { 0%{background-position:0% 50%}100%{background-position:200% 50%} }

    .auth-logo { text-align:center; margin-bottom:32px; }
    .auth-logo-icon { width:60px; height:60px; background:linear-gradient(135deg,var(--gold-light),var(--gold-color)); border-radius:16px; display:inline-flex; align-items:center; justify-content:center; margin-bottom:16px; box-shadow:0 4px 16px rgba(81,32,187,0.4); }
    .auth-logo-icon i { font-size:28px; color:white; }
    .auth-title { font-size:2rem; font-weight:700; text-align:center; margin-bottom:8px; color:var(--text-primary); letter-spacing:1px; margin-top: 0;}
    .auth-subtitle { text-align:center; color:var(--text-secondary); font-size:0.875rem; margin-bottom:32px; }
    .auth-subtitle a { color:var(--spotify-green); }
    .auth-subtitle a:hover { color:var(--spotify-green-hover); text-decoration:underline; }
    .form-group { margin-bottom:20px; position:relative; }
    .form-label { display:block; color:var(--text-primary); font-size:0.875rem; font-weight:600; margin-bottom:8px; letter-spacing:0.5px; }
    .form-input { width:100%; padding:14px 16px; background:rgba(40,40,40,0.8); border:1px solid rgba(255,255,255,0.1); border-radius:12px; color:var(--text-primary); font-size:1rem; transition:all 0.3s ease; outline:none; font-family:"Space Mono",monospace; }
    .form-input::placeholder { color:rgba(179,179,179,0.6); }
    .form-input:focus { background:rgba(40,40,40,1); border-color:var(--spotify-green); box-shadow:0 0 0 3px rgba(29,185,84,0.1); }
    .form-input:hover { border-color:rgba(255,255,255,0.2); }
    .password-wrapper { position:relative; }
    .password-toggle { position:absolute; right:16px; top:50%; transform:translateY(-50%); background:none; border:none; color:var(--text-secondary); cursor:pointer; padding:0; width:24px; height:24px; display:flex; align-items:center; justify-content:center; transition:color 0.2s; }
    .password-toggle:hover { color:var(--text-primary); }
    .form-link { display:block; text-align:right; color:var(--text-secondary); font-size:0.875rem; margin-top:-8px; margin-bottom:24px; transition:color 0.2s; }
    .form-link:hover { color:var(--spotify-green); }
    .auth-button { width:100%; padding:16px; background:var(--spotify-green); border:none; border-radius:500px; color:white; font-size:1rem; font-weight:700; cursor:pointer; transition:all 0.3s ease; text-transform:uppercase; letter-spacing:1.5px; box-shadow:0 4px 16px rgba(29,185,84,0.3); font-family:"Space Mono",monospace; }
    .auth-button:hover { background:var(--spotify-green-hover); transform:translateY(-2px); box-shadow:0 6px 20px rgba(29,185,84,0.4); }
    .divider { display:flex; align-items:center; text-align:center; margin:24px 0; color:var(--text-secondary); font-size:0.875rem; }
    .divider::before,.divider::after { content:""; flex:1; border-bottom:1px solid rgba(255,255,255,0.1); }
    .divider span { padding:0 16px; }
    .social-buttons { display:flex; gap:16px; margin-bottom:24px; }
    .social-btn { flex:1; padding:14px; background:rgba(40,40,40,0.8); border:1px solid rgba(255,255,255,0.1); border-radius:12px; color:var(--text-primary); cursor:pointer; transition:all 0.3s ease; display:flex; align-items:center; justify-content:center; gap:8px; font-weight:500; }
    .social-btn:hover { background:rgba(40,40,40,1); border-color:rgba(255,255,255,0.3); transform:translateY(-2px); }
    .social-btn i { font-size:1.25rem; }
    .social-btn.google i { background:linear-gradient(to right,#4285f4,#ea4335,#fbbc05,#34a853); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .auth-footer { text-align:center; color:var(--text-secondary); font-size:0.875rem; margin-top:24px; }
    .auth-footer button { background:none; border:none; color:var(--spotify-green); font-weight:600; cursor:pointer; padding:0; text-decoration:underline; font-family:"Space Mono",monospace; }
    .auth-footer button:hover { color:var(--spotify-green-hover); }
    .checkbox-wrapper { display:flex; align-items:center; gap:8px; margin-bottom:20px; }
    .checkbox-input { width:18px; height:18px; cursor:pointer; accent-color:var(--spotify-green); }
    .checkbox-label { color:var(--text-secondary); font-size:0.875rem; cursor:pointer; user-select:none; }

    /* ‚îÄ‚îÄ‚îÄ Back button inside card ‚îÄ‚îÄ‚îÄ */
    .back-btn { display:inline-flex; align-items:center; gap:6px; background:none; border:none; color:rgba(255,255,255,0.4); font-size:0.75rem; cursor:pointer; margin-bottom:18px; padding:0; transition:color 0.2s; font-family:"Space Mono",monospace; }
    .back-btn:hover { color:rgba(255,255,255,0.8); }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       PRICING CARD  (Image 1 style)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .pricing-card {
      background: #0e0e0e;
      border-radius: 28px;
      padding: 38px 28px 28px;
      border: 1px solid rgba(255,255,255,0.07);
      box-shadow: 0 30px 80px rgba(0,0,0,0.75);
      position: relative; overflow: hidden;
    }
  
    .pricing-title { text-align:center; font-size:1.85rem; font-weight:700; margin-bottom:6px; letter-spacing:-0.3px; }
    .pricing-sub { text-align:center; color:rgba(255,255,255,0.4); font-size:0.75rem; margin-bottom:26px; }

    /* Plan rows */
    .plan-row {
      border:1.5px solid rgba(255,255,255,0.1);
      border-radius:16px; padding:15px 18px;
      margin-bottom:10px; cursor:pointer;
      transition:all 0.28s ease; position:relative;
      display:flex; justify-content:space-between; align-items:center;
    }
    .plan-row:hover { border-color:rgba(255,255,255,0.28); background:rgba(255,255,255,0.03); }
    .plan-row.selected { border-color:var(--red); background:rgba(255,23,68,0.06); box-shadow:0 0 0 1px var(--red),0 0 18px rgba(255,23,68,0.14); }
    .plan-row.plan-free.selected { border-color:var(--spotify-green); background:rgba(29,185,84,0.06); box-shadow:0 0 0 1px var(--spotify-green),0 0 18px rgba(29,185,84,0.14); }

    .plan-info { flex:1; }
    .plan-name { font-size:0.9rem; font-weight:700; margin-bottom:2px; }
    .plan-desc { font-size:0.68rem; color:rgba(255,255,255,0.42); }
    .plan-badge { display:inline-block; background:var(--red); color:#fff; font-size:0.56rem; font-weight:700; padding:2px 7px; border-radius:4px; margin-top:5px; letter-spacing:1px; }
    .plan-price-col { text-align:right; flex-shrink:0; }
    .plan-amount { font-size:1.05rem; font-weight:700; }
    .plan-period { font-size:0.62rem; color:rgba(255,255,255,0.42); display:block; }
    .plan-old { font-size:0.7rem; color:rgba(255,255,255,0.28); text-decoration:line-through; display:block; }
    .plan-save { font-size:0.6rem; color:rgba(255,255,255,0.38); }

    /* Radio dot */
    .plan-radio { width:19px; height:19px; border-radius:50%; border:2px solid rgba(255,255,255,0.2); display:flex; align-items:center; justify-content:center; flex-shrink:0; margin-left:12px; transition:all 0.3s; }
    .plan-row.selected .plan-radio { border-color:var(--red); }
    .plan-row.plan-free.selected .plan-radio { border-color:var(--spotify-green); }
    .plan-radio::after { content:''; width:9px; height:9px; border-radius:50%; background:var(--red); opacity:0; transform:scale(0); transition:all 0.3s; }
    .plan-row.selected .plan-radio::after { opacity:1; transform:scale(1); }
    .plan-row.plan-free.selected .plan-radio::after { background:var(--spotify-green); }

    /* Patron block */
    .patron-block { border:1.5px solid rgba(255,255,255,0.09); border-radius:16px; padding:18px; margin-bottom:10px; cursor:pointer; transition:all 0.28s; }
    .patron-block:hover { border-color:rgba(255,204,51,0.35); background:rgba(255,204,51,0.02); }
    .patron-block.selected { border-color:var(--yellow); box-shadow:0 0 0 1px var(--yellow),0 0 18px rgba(255,204,51,0.14); }
    .patron-top { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:14px; gap:12px; }
    .patron-name { font-size:0.9rem; font-weight:700; }
    .patron-name span { color:var(--yellow); }
    .patron-sub { font-size:0.67rem; color:rgba(255,255,255,0.38); }
    .patron-price { text-align:right; flex-shrink:0; }
    .patron-price .amount { font-size:1.05rem; font-weight:700; color:var(--yellow); }
    .patron-price .period { font-size:0.62rem; color:rgba(255,255,255,0.35); display:block; }
    .patron-price .note { font-size:0.6rem; color:rgba(255,255,255,0.35); }
    .patron-radio { width:19px; height:19px; border-radius:50%; border:2px solid rgba(255,255,255,0.2); display:flex; align-items:center; justify-content:center; flex-shrink:0; margin-left:10px; transition:all 0.3s; align-self:center; }
    .patron-block.selected .patron-radio { border-color:var(--yellow); }
    .patron-radio::after { content:''; width:9px; height:9px; border-radius:50%; background:var(--yellow); opacity:0; transform:scale(0); transition:all 0.3s; }
    .patron-block.selected .patron-radio::after { opacity:1; transform:scale(1); }
    .patron-features { list-style:none; padding:0; margin:0 0 14px; }
    .patron-features li { display:flex; align-items:flex-start; gap:10px; font-size:0.74rem; color:rgba(255,255,255,0.62); margin-bottom:7px; line-height:1.45; }
    .patron-features li i { color:var(--yellow); font-size:0.68rem; margin-top:2px; flex-shrink:0; }
    .learn-more-btn { width:100%; padding:9px; background:transparent; border:1px solid rgba(255,255,255,0.14); border-radius:9px; color:rgba(255,255,255,0.65); font-size:0.78rem; cursor:pointer; transition:all 0.3s; font-family:"Space Mono",monospace; }
    .learn-more-btn:hover { border-color:rgba(255,204,51,0.5); color:var(--yellow); }

    /* Pricing links */
    .pricing-links { display:flex; gap:24px; justify-content:center; margin:14px 0; }
    .pricing-link { font-size:0.74rem; color:var(--red); cursor:pointer; background:none; border:none; transition:opacity 0.2s; font-family:"Space Mono",monospace; }
    .pricing-link:hover { opacity:0.7; }

    /* Main CTA */
    .cta-btn { width:100%; padding:17px; border:none; border-radius:500px; font-size:0.9rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; cursor:pointer; transition:all 0.3s; background:var(--red); box-shadow:0 4px 22px rgba(255,23,68,0.38); color:white; margin-top:4px; font-family:"Space Mono",monospace; }
    .cta-btn:hover { transform:translateY(-2px); box-shadow:0 8px 30px rgba(255,23,68,0.52); }
    .cta-btn.cta-green { background:var(--spotify-green); box-shadow:0 4px 22px rgba(29,185,84,0.38); }
    .cta-btn.cta-green:hover { background:var(--spotify-green-hover); box-shadow:0 8px 30px rgba(29,185,84,0.5); }
    .cta-note { text-align:center; font-size:0.64rem; color:rgba(255,255,255,0.28); margin-top:10px; }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       PAYMENT RECEIPT MODAL  (Image 2)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .modal-overlay {
      position:fixed; inset:0; background:rgba(0,0,0,0.72);
      backdrop-filter:blur(7px); z-index:9999;
      display:none; align-items:center; justify-content:center; padding:20px;
    }
    .modal-overlay.show { display:flex; animation:overlayIn 0.3s ease; }
    @keyframes overlayIn { from{opacity:0}to{opacity:1} }

    .receipt-wrapper { position:relative; max-width:370px; width:100%; }

    .receipt-card {
      background:#f2f2f7; border-radius:22px;
      overflow:hidden; width:100%;
      box-shadow:0 40px 80px rgba(0,0,0,0.65);
      animation:receiptPop 0.5s cubic-bezier(0.34,1.4,0.64,1);
    }
    @keyframes receiptPop { from{opacity:0;transform:scale(0.82) translateY(28px)}to{opacity:1;transform:scale(1) translateY(0)} }

    /* Receipt top section */
    .receipt-top { padding:36px 28px 24px; text-align:center; background:#f2f2f7; }
    .receipt-emoji { font-size:3rem; display:block; margin-bottom:14px; }
    .receipt-thank { font-family:"Space Mono",monospace; font-size:1.35rem; font-weight:700; color:#111; margin-bottom:6px; }
    .receipt-desc { font-size:0.78rem; color:#888; font-family:"Space Mono",monospace; line-height:1.5; }

    /* Tear separator */
    .tear { display:flex; align-items:center; overflow:visible; }
    .tear-dash { flex:1; border-top:2px dashed #ddd; margin:0; }
    .tear-hole { width:26px; height:26px; border-radius:50%; background:#0e0e0e; flex-shrink:0; }
    .tear-hole.left { margin-left:-13px; }
    .tear-hole.right { margin-right:-13px; }

    /* Receipt body */
    .receipt-body { padding:22px 28px 18px; background:#f2f2f7; }
    .receipt-row { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:18px; }
    .r-label { font-family:"Space Mono",monospace; font-size:0.6rem; font-weight:700; color:#aaa; letter-spacing:2px; text-transform:uppercase; margin-bottom:4px; }
    .r-value { font-family:"Space Mono",monospace; font-size:1.05rem; font-weight:700; color:#111; }
    .r-value.big { font-size:1.1rem; }

    .payment-chip { background:white; border-radius:13px; padding:13px 15px; display:flex; align-items:center; gap:14px; margin-bottom:22px; box-shadow:0 2px 10px rgba(0,0,0,0.07); }
    .mc-wrap { position:relative; width:42px; height:26px; flex-shrink:0; }
    .mc-c { position:absolute; width:26px; height:26px; border-radius:50%; }
    .mc-red { background:#eb001b; left:0; }
    .mc-yel { background:#f79e1b; left:16px; }
    .pm-name { font-family:"Space Mono",monospace; font-size:0.85rem; font-weight:700; color:#111; }
    .pm-num { font-family:"Space Mono",monospace; font-size:0.75rem; color:#888; }

    /* Barcode section */
    .barcode-wrap { padding:20px 28px 10px; background:#f2f2f7; text-align:center; }
    .barcode-svg { width:100%; height:64px; }
    .barcode-num { font-family:"Space Mono",monospace; font-size:0.62rem; color:#aaa; letter-spacing:3px; margin-top:4px; }

    /* Scallop bottom */
    .scallop { display:flex; justify-content:space-around; background:#f2f2f7; padding:0 8px; overflow:hidden; margin-top:4px; }
    .scallop-c { width:30px; height:15px; background:#0e0e0e; border-radius:0 0 15px 15px; }

    .receipt-close-btn { display:block; width:calc(100% - 56px); margin:12px 28px 20px; padding:13px; background:#111; border:none; border-radius:12px; color:white; font-size:0.8rem; font-weight:700; cursor:pointer; font-family:"Space Mono",monospace; letter-spacing:1px; transition:all 0.3s; }
    .receipt-close-btn:hover { background:#1a1a1a; }

    /* Misc */
    .hidden { display:none!important; }
    .fade-in { animation:fadeIn 0.4s ease; }
    @keyframes fadeIn { from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)} }

    @media (max-width:768px) {
      .auth-card { padding:32px 22px; }
      .pricing-card { padding:28px 18px 22px; }
      .social-buttons { flex-direction:column; }
      .pricing-title { font-size:1.55rem; }
    }
    @media (max-width:480px) {
      .auth-card { padding:26px 18px; }
      .auth-title { font-size:1.6rem; }
    }
  </style>
    <style>
        body{
            background-color: black;
            
        }
       .containerr {
    height: 400px;
    width: 400px;

    margin-left: 70px;
    position: relative;
    transform: scale(0.5);
    transform-origin: top left;
    margin-bottom: 0;
}
.orbit-wrapper {
    height: 200px; /* 400 * 0.5 */
    overflow: hidden;
}

.containerr {
    height: 400px;
    width: 400px;
    transform: scale(0.5);
    transform-origin: top left;
}


/* SUN */
.sun {
    width: 80px;
    height: 80px;
    background-color: yellow;
    border-radius: 50%;
    box-shadow: 0 0 30px white;
    position: absolute;
    top: 150px;
    left: 150px;
}

/* EARTH */
.globe.earth {
    background: aqua;
    height: 10px;
    width: 10px;
    right: 28px;
    top: 28px;
}

/* MOON */
.globe.moon {
    width: 12px;
    height: 12px;
    background: #d6d6d6;
    right: 2px;
    top: 8px;
}

/* COMMON GLOBE STYLE */
.globe {
    border-radius: 50%;
    position: absolute;
}

/* EARTH ORBIT */
.orbit.earth {
    position: relative;
    animation: orbit 36.5s linear infinite;
    height: 300px;
    width: 300px;
    left: 50px;
    top: 50px;
}

/* MOON ORBIT */
.orbit.moon {
    animation: orbit 2.7s linear infinite;
    height: 80px;
    width: 80px;
    left: -25px;
    top: -25px;
}

/* COMMON ORBIT STYLE */
.orbit {
    position: relative;
    border: solid;
    border-color: white transparent transparent transparent;
    border-radius: 50%;
    border-width: 1px 1px 0 0;
    box-sizing: border-box;
    transform: rotate(0deg);
    transform-origin: center;
}

/* ANIMATION */
@keyframes orbit {
    to {
        transform: rotate(360deg);
    }
}

    </style>
</head>

<body>

<!-- ‚ïê‚ïê‚ïê Desktop Nav ‚ïê‚ïê‚ïê -->
<nav class="navbar d-none d-md-block">
  <div class="container px-4">
    <div class="d-flex justify-content-between align-items-center w-100">
      <div class="d-flex align-items-center">
        <div class="logo-box"><i class="fas fa-rocket"></i></div>
        <span class="brand-text">THEDUNG</span>
      </div>
      <div class="day-navigator">
        <button class="nav-arrow"><i class="fas fa-chevron-left"></i></button>
        <a href="index.html" class="day-btn">TRANG CH·ª¶</a>
        <a href="courses.html" class="day-btn">KH√ìA H·ªåC</a>
        <a href="netflix.html" class="day-btn">NETFLIX</a>
        <a href="music.html" class="day-btn">√ÇM NH·∫†C</a>
        <a href="news.html" class="day-btn">TIN T·ª®C</a>
        <a href="contact.html" class="day-btn">LI√äN H·ªÜ</a>
        <button class="nav-arrow"><i class="fas fa-chevron-right"></i></button>
      </div>
      <div class="d-flex align-items-center gap-2">
        <button class="icon-btn"><i class="fa-regular fa-comment"></i></button>
        <button class="icon-btn"><i class="fa-regular fa-bell"></i><span class="notification-dot"></span></button>
        <div id="userAreaDesktop"></div>
      </div>
    </div>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê Mobile Nav ‚ïê‚ïê‚ïê -->
<nav class="navbar d-md-none">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center w-100">
      <div class="d-flex align-items-center">
        <div class="logo-box"><i class="fas fa-rocket"></i></div>
        <span class="brand-text">THEDUNG</span>
      </div>
      <div class="d-flex align-items-center gap-1">
        <button class="icon-btn"><i class="fa-regular fa-comment"></i></button>
        <button class="icon-btn"><i class="fa-regular fa-bell"></i><span class="notification-dot"></span></button>
        <button class="icon-btn" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu"><i class="fas fa-bars"></i></button>
      </div>
    </div>
  </div>
</nav>
<div class="mobile-day-nav d-md-none">
  <div class="d-flex align-items-center gap-2">
    <button class="nav-arrow"><i class="fas fa-chevron-left"></i></button>
    <div class="d-inline-flex gap-1">
      <a href="index.html" class="day-btn mobile-day-btn">Trang ch·ªß</a>
      <a href="courses.html" class="day-btn mobile-day-btn">Kh√≥a h·ªçc</a>
      <a href="netflix.html" class="day-btn mobile-day-btn">Netflix</a>
      <a href="music.html" class="day-btn mobile-day-btn">√Çm nh·∫°c</a>
      <a href="news.html" class="day-btn mobile-day-btn">Tin t·ª©c</a>
      <a href="contact.html" class="day-btn mobile-day-btn">Li√™n h·ªá</a>
    </div>
    <button class="nav-arrow"><i class="fas fa-chevron-right"></i></button>
  </div>
</div>

<!-- Offcanvas -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="mobileMenu">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Menu</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <div class="menu-section">
      <div class="section-title">Navigation</div>
      <a href="index.html" class="menu-item"><i class="fas fa-home"></i>Trang ch·ªß</a>
      <a href="courses.html" class="menu-item"><i class="fas fa-sun"></i>Kh√≥a h·ªçc</a>
      <a href="netflix.html" class="menu-item"><i class="fas fa-film"></i>Netflix</a>
      <a href="music.html" class="menu-item"><i class="fas fa-music"></i>√Çm nh·∫°c</a>
      <a href="news.html" class="menu-item"><i class="fas fa-newspaper"></i>Tin t·ª©c</a>
      <a href="contact.html" class="menu-item"><i class="fas fa-envelope"></i>Li√™n h·ªá</a>
    </div>
    <div class="menu-divider"></div>
    <div class="menu-section">
      <div class="section-title">Explore</div>
      <a href="#" class="menu-item"><i class="fas fa-sun"></i>Tr·∫Øc nghi·ªám</a>
      <a href="#" class="menu-item"><i class="fas fa-circle"></i>T√†i li·ªáu</a>
      <a href="#" class="menu-item"><i class="fas fa-circle"></i>Thi th·ª≠</a>
    </div>
    <div class="menu-divider"></div>
    <div class="menu-section">
      <div class="section-title">Account</div>
      <div id="userAreaMobile"></div>
      <a href="settings.html" class="menu-item"><i class="fas fa-cog"></i>C√†i ƒë·∫∑t</a>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<main>
<div class="auth-container">

  <!-- ‚ïê‚ïê SCREEN 1: PRICING ‚ïê‚ïê -->
  <div id="screen-pricing" class="screen active">
    <div class="pricing-card">
      <h1 class="pricing-title">Th·ª≠ 7 ng√†y mi·ªÖn ph√≠ üöÄ</h1>
      <p class="pricing-sub">Ch·ªçn g√≥i ph√π h·ª£p v·ªõi b·∫°n</p>

      <!-- FREE -->
      <div class="plan-row plan-free" id="plan-free" onclick="selectPlan('free')">
        <div class="plan-info">
          <div class="plan-name">Mi·ªÖn ph√≠</div>
          <div class="plan-desc">Truy c·∫≠p c√°c t√≠nh nƒÉng c∆° b·∫£n</div>
        </div>
        <div class="plan-price-col">
          <span class="plan-amount">0ƒë</span>
          <span class="plan-period">/th√°ng</span>
        </div>
        <div class="plan-radio"></div>
      </div>

      <!-- MONTHLY (default selected) -->
      <div class="plan-row selected" id="plan-monthly" onclick="selectPlan('monthly')">
        <div class="plan-info">
          <div class="plan-name">Premium Th√°ng</div>
          <div class="plan-desc">To√†n b·ªô t√≠nh nƒÉng kh√¥ng gi·ªõi h·∫°n</div>
        </div>
        <div class="plan-price-col">
          <span class="plan-amount">49.000ƒë</span>
          <span class="plan-period">/th√°ng</span>
        </div>
        <div class="plan-radio"></div>
      </div>

      <!-- ANNUAL -->
      <div class="plan-row" id="plan-annual" onclick="selectPlan('annual')">
        <div class="plan-info">
          <div class="plan-name">Premium NƒÉm</div>
          <div class="plan-desc">Ti·∫øt ki·ªám nh·∫•t</div>
          <span class="plan-badge">TI·∫æT KI·ªÜM 49%</span>
        </div>
        <div class="plan-price-col">
          <span class="plan-old">599.000ƒë</span>
          <span class="plan-amount">299.000ƒë</span>
          <span class="plan-period">/nƒÉm</span>
          <span class="plan-save">Ch·ªâ 25.000ƒë/th√°ng</span>
        </div>
        <div class="plan-radio"></div>
      </div>

      <!-- PATRON -->
      <div class="patron-block" id="plan-patron" onclick="selectPlan('patron')">
        <div class="patron-top">
          <div>
            <div class="patron-name">Tr·ªü th√†nh <span>Patron üëë</span></div>
            <div class="patron-sub">ƒêƒÉng k√Ω h·∫±ng nƒÉm</div>
          </div>
          <div class="patron-price">
            <span class="amount">1.199.000ƒë</span>
            <span class="period">/nƒÉm</span>
            <span class="note">~100.000ƒë/th√°ng</span>
          </div>
          <div class="patron-radio"></div>
        </div>
        <ul class="patron-features">
          <li><i class="fas fa-check"></i>T·∫•t c·∫£ t√≠nh nƒÉng Premium kh√¥ng gi·ªõi h·∫°n</li>
          <li><i class="fas fa-check"></i>Tham gia nh√≥m Supporters ∆∞u t√∫ c·ªßa THEDUNG</li>
          <li><i class="fas fa-check"></i>Newsletter ƒë·ªôc quy·ªÅn & ∆∞u ƒë√£i trong Shop</li>
          <li><i class="fas fa-check"></i>Bi·ªÉu t∆∞·ª£ng Patron ƒë·∫∑c bi·ªát tr√™n h·ªì s∆° c·ªßa b·∫°n</li>
        </ul>
        <button class="learn-more-btn" onclick="event.stopPropagation()">T√¨m hi·ªÉu th√™m</button>
      </div>

      <div class="pricing-links">
        <button class="pricing-link">Nh·∫≠p m√£ khuy·∫øn m√£i</button>
        <button class="pricing-link">Kh√¥i ph·ª•c mua h√†ng</button>
      </div>

      <button class="cta-btn" id="ctaBtn" onclick="handleCTA()">B·∫Øt ƒë·∫ßu 7 ng√†y d√πng th·ª≠</button>
      <p class="cta-note" id="ctaNote">7 ng√†y mi·ªÖn ph√≠, sau ƒë√≥ 49.000ƒë/th√°ng. H·ªßy b·∫•t c·ª© l√∫c n√†o.</p>
    </div>
  </div>

  <!-- ‚ïê‚ïê SCREEN 2: LOGIN ‚ïê‚ïê -->
  <div id="screen-login" class="screen">
    <div class="auth-card fade-in">
      <button class="back-btn" onclick="showScreen('pricing')">
        <i class="fas fa-arrow-left"></i> Quay l·∫°i ch·ªçn g√≥i
      </button>

       <div class="orbit-wrapper">
<div class="containerr">
        <div class="sun"></div>

        <div class="orbit earth">
            <div class="globe earth">
                <div class="orbit moon">
                    <div class="globe moon"></div>
                </div>
            </div>
        </div>
    </div>
</div>

      <h1 class="auth-title">Sign In</h1>
      <p class="auth-subtitle">If You Need Any Support <a href="#">Click Here</a></p>

      <form class="auth-form" onsubmit="return handleLogin(event)">
        <div class="form-group">
          <label class="form-label">Email ho·∫∑c T√™n ƒëƒÉng nh·∫≠p</label>
          <input id="loginInput" type="text" class="form-input" placeholder="Enter Username Or Email" required />
        </div>
        <div class="form-group">
          <label class="form-label">M·∫≠t kh·∫©u</label>
          <div class="password-wrapper">
            <input type="password" id="loginPassword" class="form-input" placeholder="Password" required />
            <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">
              <i class="far fa-eye" id="loginPasswordIcon"></i>
            </button>
          </div>
        </div>
        <a href="#" class="form-link">Recovery Password</a>
        <button type="submit" class="auth-button">Sign In</button>
      </form>

      <div class="divider"><span>Or</span></div>
      <div class="social-buttons">
        <button class="social-btn google"><i class="fab fa-google"></i> Google</button>
        <button class="social-btn apple"><i class="fab fa-apple"></i> Apple</button>
      </div>
      <div class="auth-footer">Not A Member? <button onclick="showScreen('register')">Register Now</button></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê SCREEN 3: REGISTER ‚ïê‚ïê -->
  <div id="screen-register" class="screen">
    <div class="auth-card fade-in">
      <button class="back-btn" onclick="showScreen('login')">
        <i class="fas fa-arrow-left"></i> Quay l·∫°i ƒëƒÉng nh·∫≠p
      </button>
<div class="orbit-wrapper">
<div class="containerr">
        <div class="sun"></div>

        <div class="orbit earth">
            <div class="globe earth">
                <div class="orbit moon">
                    <div class="globe moon"></div>
                </div>
            </div>
        </div>
    </div>
</div>
      

      <h1 class="auth-title">Register</h1>
      <p class="auth-subtitle">Create your account to get started</p>

      <form class="auth-form" onsubmit="return handleRegister(event)">
        <div class="form-group">
          <label class="form-label">H·ªç v√† t√™n</label>
          <input type="text" class="form-input" placeholder="Enter Full Name" required />
        </div>
        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" class="form-input" placeholder="Enter Email Address" required />
        </div>
        <div class="form-group">
          <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
          <input type="text" class="form-input" placeholder="Enter Username" required />
        </div>
        <div class="form-group">
          <label class="form-label">M·∫≠t kh·∫©u</label>
          <div class="password-wrapper">
            <input type="password" id="registerPassword" class="form-input" placeholder="Create Password" required />
            <button type="button" class="password-toggle" onclick="togglePassword('registerPassword')">
              <i class="far fa-eye" id="registerPasswordIcon"></i>
            </button>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
          <div class="password-wrapper">
            <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm Password" required />
            <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">
              <i class="far fa-eye" id="confirmPasswordIcon"></i>
            </button>
          </div>
        </div>
        <div class="checkbox-wrapper">
          <input type="checkbox" id="terms" class="checkbox-input" required />
          <label for="terms" class="checkbox-label">I agree to the Terms and Conditions</label>
        </div>
        <button type="submit" class="auth-button">Register</button>
      </form>

      <div class="divider"><span>Or</span></div>
      <div class="social-buttons">
        <button class="social-btn google"><i class="fab fa-google"></i> Google</button>
        <button class="social-btn apple"><i class="fab fa-apple"></i> Apple</button>
      </div>
      <div class="auth-footer">Already Have An Account? <button onclick="showScreen('login')">Sign In</button></div>
    </div>
  </div>

</div><!-- /auth-container -->
</main>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RECEIPT MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="modal-overlay" id="paymentModal" onclick="handleOverlayClick(event)">
  <div class="receipt-wrapper">
    <div class="receipt-card">

      <!-- Top -->
      <div class="receipt-top">
        <span class="receipt-emoji">üéâ</span>
        <div class="receipt-thank">C·∫£m ∆°n b·∫°n!</div>
        <div class="receipt-desc">V√© ƒëƒÉng k√Ω c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c<br>ph√°t h√†nh th√†nh c√¥ng</div>
      </div>

      <!-- Tear top -->
      <div class="tear">
        <div class="tear-hole left"></div>
        <div class="tear-dash"></div>
        <div class="tear-hole right"></div>
      </div>

      <!-- Body -->
      <div class="receipt-body">
        <div class="receipt-row">
          <div>
            <div class="r-label">M√£ ƒë∆°n h√†ng</div>
            <div class="r-value" id="receiptId">0120034399434</div>
          </div>
          <div style="text-align:right">
            <div class="r-label">S·ªë ti·ªÅn</div>
            <div class="r-value big" id="receiptAmount">49.000ƒë</div>
          </div>
        </div>

        <div style="margin-bottom:18px">
          <div class="r-label">Ng√†y &amp; Gi·ªù</div>
          <div class="r-value" id="receiptDate" style="font-size:0.95rem">‚Äî</div>
        </div>

        <!-- Payment method -->
        <div class="payment-chip">
          <div class="mc-wrap">
            <div class="mc-c mc-red"></div>
            <div class="mc-c mc-yel"></div>
          </div>
          <div>
            <div class="pm-name">LUONG THE DUNG</div>
            <div class="pm-num">3801062003 MBBank</div>
          </div>
        </div>
      </div>

      <!-- Tear bottom -->
      <div class="tear">
        <div class="tear-hole left"></div>
        <div class="tear-dash"></div>
        <div class="tear-hole right"></div>
      </div>

      <!-- Barcode -->
      <div class="barcode-wrap">
        <svg class="barcode-svg" id="barcodeEl" viewBox="0 0 300 64" preserveAspectRatio="none"></svg>
        <div class="barcode-num" id="barcodeNum">2 8937261 273610</div>
      </div>

      <!-- Scallop -->
      <div class="scallop">
        <div class="scallop-c"></div><div class="scallop-c"></div>
        <div class="scallop-c"></div><div class="scallop-c"></div>
        <div class="scallop-c"></div><div class="scallop-c"></div>
        <div class="scallop-c"></div>
      </div>

      <button class="receipt-close-btn" onclick="closeModal()">B·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng ‚Üí</button>
    </div>
  </div>
</div>

<script src="js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

<script>
/* ‚ïê‚ïê‚ïê PLAN STATE ‚ïê‚ïê‚ïê */
let currentPlan = 'monthly';

const PLANS = {
  free:    { label:'Free',           amount:'0ƒë',          cta:'B·∫Øt ƒë·∫ßu mi·ªÖn ph√≠',         note:'Ho√†n to√†n mi·ªÖn ph√≠. Kh√¥ng c·∫ßn th·∫ª.',                          green:true  },
  monthly: { label:'Premium Th√°ng',  amount:'49.000ƒë',     cta:'B·∫Øt ƒë·∫ßu 7 ng√†y d√πng th·ª≠',  note:'7 ng√†y mi·ªÖn ph√≠, sau ƒë√≥ 49.000ƒë/th√°ng. H·ªßy b·∫•t c·ª© l√∫c n√†o.', green:false },
  annual:  { label:'Premium NƒÉm',    amount:'299.000ƒë',    cta:'B·∫Øt ƒë·∫ßu 7 ng√†y d√πng th·ª≠',  note:'7 ng√†y mi·ªÖn ph√≠, sau ƒë√≥ 299.000ƒë/nƒÉm. H·ªßy b·∫•t c·ª© l√∫c n√†o.',   green:false },
  patron:  { label:'Patron üëë',      amount:'1.199.000ƒë',  cta:'Tr·ªü th√†nh Patron',          note:'ƒêƒÉng k√Ω h·∫±ng nƒÉm. H·ªßy b·∫•t c·ª© l√∫c n√†o.',                       green:false },
};

function selectPlan(plan) {
  currentPlan = plan;

  /* clear all */
  ['free','monthly','annual'].forEach(p => {
    const el = document.getElementById('plan-'+p);
    if (el) el.classList.remove('selected');
  });
  document.getElementById('plan-patron').classList.remove('selected');

  /* activate */
  if (plan === 'patron') {
    document.getElementById('plan-patron').classList.add('selected');
  } else {
    document.getElementById('plan-'+plan).classList.add('selected');
  }

  /* update CTA */
  const cfg = PLANS[plan];
  const btn  = document.getElementById('ctaBtn');
  const note = document.getElementById('ctaNote');
  btn.textContent  = cfg.cta;
  note.textContent = cfg.note;
  btn.className    = 'cta-btn' + (cfg.green ? ' cta-green' : '');
}

function handleCTA() {
  if (currentPlan === 'free') {
    showScreen('login');
  } else {
    openModal(currentPlan);
  }
}

/* ‚ïê‚ïê‚ïê SCREEN SWITCH ‚ïê‚ïê‚ïê */
function showScreen(name) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  const el = document.getElementById('screen-' + name);
  if (el) { el.classList.add('active'); }
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ‚ïê‚ïê‚ïê PASSWORD TOGGLE ‚ïê‚ïê‚ïê */
function togglePassword(inputId) {
  const input = document.getElementById(inputId);
  const icon  = document.getElementById(inputId + 'Icon');
  if (!input) return;
  if (input.type === 'password') {
    input.type = 'text';
    if (icon) { icon.classList.replace('fa-eye','fa-eye-slash'); }
  } else {
    input.type = 'password';
    if (icon) { icon.classList.replace('fa-eye-slash','fa-eye'); }
  }
}

/* ‚ïê‚ïê‚ïê FAKE DB ‚ïê‚ïê‚ïê */
const users = [
  {username:"Th·∫ø D≈©ng",      email:"thedung@gmail.com",        password:"123456"},
  {username:"Xu√¢n Mai",      email:"xuanmai@gmail.com",         password:"123456"},
  {username:"Tr·∫ßn B√° Song",  email:"tranbasong@gmail.com",      password:"123456"},
  {username:"L√™ Ch√≠ Duy",   email:"lechiduy@gmail.com",        password:"123456"},
  {username:"B√πi ·∫§t Du",    email:"buiatdu@gmail.com",         password:"123456"},
  {username:"Nguy·ªÖn VƒÉn Th·∫°nh", email:"nguyenvanthanh@gmail.com", password:"123456"},
  {username:"V√µ T·∫•n Duy",   email:"votanduy@gmail.com",        password:"123456"},
];

/* ‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê */
function handleLogin(event) {
  event.preventDefault();
  const input    = document.getElementById('loginInput').value.trim();
  const password = document.getElementById('loginPassword').value;
  const user     = users.find(u => (u.username === input || u.email === input) && u.password === password);
  if (!user) { alert('Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u!'); return false; }
  localStorage.setItem('currentUser', JSON.stringify(user));
  const redirect = localStorage.getItem('redirectAfterLogin');
  if (redirect) { localStorage.removeItem('redirectAfterLogin'); window.location.href = redirect; }
  else { window.location.href = 'index.html'; }
  return false;
}

/* ‚ïê‚ïê‚ïê REGISTER ‚ïê‚ïê‚ïê */
function handleRegister(event) {
  event.preventDefault();
  const pass    = document.getElementById('registerPassword').value;
  const confirm = document.getElementById('confirmPassword').value;
  if (pass !== confirm) { alert('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!'); return false; }
  alert('ƒêƒÉng k√Ω th√†nh c√¥ng! B·∫°n c√≥ th·ªÉ ƒëƒÉng nh·∫≠p ngay b√¢y gi·ªù.');
  showScreen('login');
  return false;
}

/* ‚ïê‚ïê‚ïê RECEIPT MODAL ‚ïê‚ïê‚ïê */
function openModal(plan) {
  const cfg = PLANS[plan];

  /* generate random data */
  const ticketId = String(Math.floor(Math.random()*9e12 + 1e12));
  const barcode  = String(Math.floor(Math.random()*9e12 + 1e12));
  const now      = new Date();
  const dateStr  = now.toLocaleDateString('vi-VN',{day:'2-digit',month:'short',year:'numeric'})
                 + ' ‚Ä¢ ' + now.toLocaleTimeString('vi-VN',{hour:'2-digit',minute:'2-digit'});

  document.getElementById('receiptId').textContent     = ticketId;
  document.getElementById('receiptAmount').textContent  = cfg.amount;
  document.getElementById('receiptDate').textContent    = dateStr;
  document.getElementById('barcodeNum').textContent     = barcode.match(/.{1,7}/g).join(' ');

  /* draw barcode SVG */
  drawBarcode(barcode);

  document.getElementById('paymentModal').classList.add('show');
}

function drawBarcode(data) {
  const svg = document.getElementById('barcodeEl');
  svg.innerHTML = '';
  const widths = [2,1,3,1,2,2,1,3,2,1,1,2,3,1,2,1,3,1,2,2,1,1,3,2,1,2,1,3,2,1,1,2,2,3];
  let x = 0;
  widths.forEach((w, i) => {
    const bar = document.createElementNS('http://www.w3.org/2000/svg','rect');
    bar.setAttribute('x', x);
    bar.setAttribute('y', 0);
    bar.setAttribute('width', w * 2.8);
    bar.setAttribute('height', 64);
    bar.setAttribute('fill', i % 2 === 0 ? '#111' : '#f2f2f7');
    svg.appendChild(bar);
    x += w * 2.8;
  });
}

function closeModal() {
  document.getElementById('paymentModal').classList.remove('show');
  showScreen('login');
}

function handleOverlayClick(e) {
  if (e.target === document.getElementById('paymentModal')) closeModal();
}

/* ‚ïê‚ïê‚ïê USER UI ‚ïê‚ïê‚ïê */
function updateUserUI() {
  const user        = JSON.parse(localStorage.getItem('currentUser'));
  const desktopArea = document.getElementById('userAreaDesktop');
  const mobileArea  = document.getElementById('userAreaMobile');
  if (!desktopArea || !mobileArea) return;

  if (user) {
    desktopArea.innerHTML = `
      <div class="dropdown user-dropdown">
        <button class="btn user-btn dropdown-toggle" data-bs-toggle="dropdown" data-bs-auto-close="true">
          <i class="fa-solid fa-user"></i>
          <span class="username-text">${user.username.toUpperCase()}</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark user-menu">
          <li><button class="dropdown-item text-danger" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i>ƒêƒÉng xu·∫•t</button></li>
        </ul>
      </div>`;
    mobileArea.innerHTML = `
      <div class="menu-item"><i class="fas fa-user"></i>${user.username}</div>
      <div class="menu-item text-danger" onclick="logout()" style="cursor:pointer"><i class="fas fa-sign-out-alt"></i>ƒêƒÉng xu·∫•t</div>`;
  } else {
    desktopArea.innerHTML = `<a href="login.html" class="icon-btn"><i class="fa-regular fa-user"></i></a>`;
    mobileArea.innerHTML  = `<a href="login.html" class="menu-item"><i class="fas fa-sign-in-alt"></i>ƒêƒÉng nh·∫≠p</a>`;
  }
}

function logout() { localStorage.removeItem('currentUser'); window.location.reload(); }

/* ‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê */
document.addEventListener('DOMContentLoaded', () => {
  updateUserUI();
  selectPlan('monthly');
  AOS.init({ duration:900, easing:'ease-out-cubic', once:true, offset:120 });
});
</script>
</body>
</html>